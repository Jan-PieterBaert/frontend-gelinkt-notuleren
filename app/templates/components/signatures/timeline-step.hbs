{{#component step isOpen=isOpen title=name pill=algemeneStatus icon=iconName as |step|}}
  {{#step.block title=title pillColor=voorVertoningStatus.color pillName=voorVertoningStatus.label}}
    {{{mockDocument.body}}}
  {{/step.block}}
  {{#step.block title="Onderteken" pillColor=handtekeningStatus.color pillName=handtekeningStatus.label}}
    <div class="grid">
      {{#if (eq signaturesCount 2)}}
        {{#each document.signedResources as |signature|}}
          <div class="col--4-12">
            {{signatures/signed-resource signature=signature}}
          </div>
        {{/each}}
      {{else if (eq signaturesCount 1)}}
        <div class="col--4-12">
          {{signatures/signed-resource signature=document.signedResources.firstObject}}
        </div>
        <div class="col--4-12">
          <p class="smaller uppercase text-fade">Tweede handtekening vereist</p>
          {{wu-button
              label=(concat "Onderteken " name)
              isSmall=true isNarrow=true
              class="button u-spacer--top--tiny"
              onClick=(action (mut showSigningModal) true)
              isLoading=signDocument.isRunning
              disabled=(or (not currentSession.canSign) signDocument.isRunning)
          }}
        </div>
      {{else}} {{!-- No signatures placed --}}
        <div class="col--6-12">
          <p class="smaller uppercase text-fade">Handtekeningen vereist door voorzitter en algemeen directeur met rol <a href="https://gelinkt-notuleren.vlaanderen.be/handleiding/#gebruikersbeheer" target="_blank">ondertekenaar</a></p>
          <!-- dit verschilt voor verschillende organen -->
          {{wu-button
              label=(concat "Onderteken " name)
              class="button u-spacer--top--tiny"
              onClick=(action (mut showSigningModal) true)
              isLoading=signDocument.isRunning
              disabled=(or (not currentSession.canSign) signDocument.isRunning)
          }}
        </div>
      {{/if}}
      {{#if showSigningModal}}
        {{signatures/signature-confirmation
              name=name
              mockDocument=mockDocument
              confirm=(perform signDocument mockDocument.signedId)
              cancel=(action (mut showSigningModal) false)
              }}
      {{/if}}
    </div>
  {{/step.block}}
  {{#step.block title="Publiceer" pillColor=(if document.publishedResource "primary-blue") pillName=(if document.publishedResource "Publiek" "Niet publiek")}}
    <div class="u-background--gray-lightest u-padding--round--small u-spacer--tb--small">
      <div class="grid">
        {{#if isPublished}}
          <div class="col--3-12">
            {{signatures/published-resource signature=document.publishedResource}}
          </div>
          <div class="col--6-12">
            <p class="smallest uppercase text-fade">Link</p>
            <p><a href="https://publicatie.gelinkt-notuleren.vlaanderen.be/{{bestuurseenheid.naam}}/{{bestuurseenheid.classificatie.label}}" class="small u-spacer--tb--tinier" target="_blank">publicatie.gelinkt-notuleren.vlaanderen.be/{{bestuurseenheid.naam}}/{{bestuurseenheid.classificatie.label}}</a></p>
          </div>
          <div class="col--3-12">
            <p class="smaller uppercase text-fade">Type publicatie</p>
            <p class="u-spacer--tb--tinier">Publiek voor iedereen</p>
          </div>
        {{else}}
          <div class="col--8-12">
            <p class="smaller uppercase text-fade">Publicatie door <a href="https://gelinkt-notuleren.vlaanderen.be/handleiding/#gebruikersbeheer" target="_blank">publiceerder</a></p>
            {{wu-button
                label=(concat "Publiceer " name)
                class="button u-spacer--top--tiny"
                onClick=(action (mut showPublishingModal) true)
                isLoading=publishDocument.isRunning
                disabled=(or (not currentSession.canPublish) publishDocument.isRunning)
            }}
            <p class="text-fade small">De {{name}} wordt gepubliceerd zoals bovenaan in de voorvertoning naar <a href="https://publicatie.gelinkt-notuleren.vlaanderen.be" target="_blank">publicatie.gelinkt-notuleren.vlaanderen.be</a>, en zal zichtbaar zijn voor iedereen zonder authenticatie.</p>
          </div>
        {{/if}}
        {{#if showPublishingModal}}
          {{signatures/publication-confirmation
              name=name
              mockDocument=mockDocument
              confirm=(perform publishDocument mockDocument.signedId)
              cancel=(action (mut showPublishingModal) false)
          }}
        {{/if}}
      </div>
    </div>
  {{/step.block}}
{{/component}}
