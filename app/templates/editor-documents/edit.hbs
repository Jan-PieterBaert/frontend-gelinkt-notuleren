{{#app-chrome editorDocument=editorDocument}}
  {{editor-document-persistence-manager
    editorDocument=editorDocument
    statusIdMap=statusIdMap
    save=(action "save")
    publish=(action "publish")
    sendToTrash=(action "sendToTrash")
  }}
{{/app-chrome}}
{{!-- Hide toolbar until implemented {{#editor-toolbar}}{{/editor-toolbar}} --}}
{{#if validationErrors}}
  {{#wu-modal
    title="Geef uw document een naam"
    dialog-class="modal-dialog--wide modal-dialog--sectioned"
    onClose=(action 'closeValidationModal') as |m|}}
    {{#m.content}}
      Klik op de titel om uw document een naam te geven.
    {{/m.content}}
    {{#m.buttons as |b|}}
      {{b.button label="OK" onClick=(action 'closeValidationModal')}}
    {{/m.buttons}}
  {{/wu-modal}}
{{/if}}

{{#if modalTransitionToTrash}}
  {{#wu-modal
    title="Weet u zeker dat u uw document naar de prullenmand wil verplaatsen?"
    dialog-class="modal-dialog--wide modal-dialog--sectioned"
    onClose=(action 'onClosePublishStatusModal') as |m|}}
    <div class="modal-dialog__footer">
	    {{#m.buttons as |b|}}
	      {{b.button label="Ja, verplaats naar prullenmand" onClick=(action 'terminatePublishFlow')}}
	      {{b.button label="Annuleren" onClick=(action 'onClosePublishStatusModal') isLink=true icon="vi-cross"}}
	    {{/m.buttons}}
	  </div>
  {{/wu-modal}}
{{/if}}
{{#if modalTransitionToAgendaPublished}}
  {{#wu-modal
    title="Uw agenda wordt gepubliceerd"
    dialog-class="modal-dialog--wide modal-dialog--sectioned"
    onClose=(action 'onClosePublishStatusModal') as |m|}}
    {{#m.content}}
      <div class="u-padding--round--small">
        <div class="grid">
          <div class="col--4-12">
            <h2 class="h6 uppercase text-fade u-spacer--bottom--small">Waar wordt de agenda gepubliceerd</h2>
            <p class="u-spacer">De openbare agenda worden publiek gemaakt, en is terug te vinden op <a href="https://publicatie.trefdag.gelinkt-notuleren.prod.lblod.info" target="_blank">https://publicatie.trefdag.gelinkt-notuleren.prod.lblod.info</a>.</p>
            <p>De publicatie wordt voltooid binnen de 24 uur. U kan de publicatie niet omkeren.</p>
          </div>
          <div class="col--7-12 push--1-12">
            <h2 class="h6 uppercase text-fade u-spacer--bottom--small">Voorbeeld van uw publicatie</h2>
            <div class="published-example published-example--agenda">
              {{{editorDomNode.innerHTML}}}
            </div>
          </div>
        </div>
      </div>
    {{/m.content}}
    <div class="modal-dialog__footer">
      {{#m.buttons as |b|}}
        {{b.button label="Publiceer agendapunten" onClick=(action 'terminatePublishFlow')}}
        {{b.button label="Annuleer" class="button--alt button--narrow" onClick=(action 'onClosePublishStatusModal') icon="vi-cross"}}
      {{/m.buttons}}
    </div>
  {{/wu-modal}}
{{/if}}
{{#if modalTransitionToBesluitenlijstPublished}}
  {{#wu-modal
    title="De besluitenlijst wordt gepubliceerd"
    dialog-class="modal-dialog--wide modal-dialog--sectioned"
    onClose=(action 'onClosePublishStatusModal') as |m|}}
    {{#m.content}}
      <div class="u-padding--round--small">
        <div class="grid">
          <div class="col--4-12">
            <h2 class="h6 uppercase text-fade u-spacer--bottom--small">Waar wordt de besluitenlijst gepubliceerd</h2>
            <ul class="bullet-list u-spacer--none">
              <li>De openbare besluitenlijst wordt publiek gemaakt, en is terug te vinden op <a href="https://publicatie.trefdag.gelinkt-notuleren.prod.lblod.info" target="_blank">https://publicatie.trefdag.gelinkt-notuleren.prod.lblod.info</a></li>
              <li>De besluitenlijst wordt beschikbaar gemaakt voor de toezichthoudende overheid, op <a href="https://loket.lokaalbestuur.vlaanderen.be" target="_blank">loket.lokaalbestuur.vlaanderen.be</a></li>
              <li>De mandaten die behandeld worden in uw besluiten worden eveneens publiek gemaakt, en zijn terug te vinden op <a href="https://loket.lokaalbestuur.vlaanderen.be" target="_blank">loket.lokaalbestuur.vlaanderen.be</a> en op <a href="http://mandaten.lokaalbestuur.vlaanderen.be" target="_blank">mandaten.lokaalbestuur.vlaanderen.be</a>.</li>
            </ul>
            <p>De publicatie wordt voltooid binnen de 24 uur. U kan de publicatie niet omkeren.</p>
          </div>
          <div class="col--7-12 push--1-12">
            <h2 class="h6 uppercase text-fade u-spacer--bottom--small">Voorbeeld van uw publicatie</h2>
            <div class="published-example published-example--besluitenlijst">
              {{{editorDomNode.innerHTML}}}
            </div>
          </div>
        </div>
      </div>
    {{/m.content}}
    <div class="modal-dialog__footer">
      {{#m.buttons as |b|}}
        {{b.button label="Publiceer besluitenlijst" onClick=(action 'terminatePublishFlow')}}
        {{b.button label="Annuleren" onClick=(action 'onClosePublishStatusModal') isLink=true icon="vi-cross"}}
      {{/m.buttons}}
    </div>
  {{/wu-modal}}
{{/if}}
{{#if modalTransitionToSignedPublished}}
  {{#wu-modal
    title="Uw notulen worden gepubliceerd"
    dialog-class="modal-dialog--wide modal-dialog--sectioned"
    onClose=(action 'onClosePublishStatusModal') as |m|}}
    {{#m.content}}
      <div class="u-padding--round--small">
        <div class="grid">
          <div class="col--4-12">
            <h2 class="h6 uppercase text-fade u-spacer--bottom--small">Waar worden de notulen gepubliceerd</h2>
            <ul class="bullet-list u-spacer--none">
              <li>De openbare notulen worden publiek gemaakt voor burgers, en is terug te vinden op <a href="https://publicatie.trefdag.gelinkt-notuleren.prod.lblod.info" target="_blank">https://publicatie.trefdag.gelinkt-notuleren.prod.lblod.info</a></li>
            </ul>
            <p>De publicatie wordt voltooid binnen de 24 uur. U kan de publicatie niet omkeren.</p>
          </div>
          <div class="col--7-12 push--1-12">
            <h2 class="h6 uppercase text-fade u-spacer--bottom--small">Voorbeeld van uw publicatie</h2>
            <div class="published-example published-example--notulen">
              {{{editorDomNode.innerHTML}}}
            </div>
          </div>
        </div>
      </div>
    {{/m.content}}
    <div class="modal-dialog__footer">
      {{#m.buttons as |b|}}
        {{b.button label="Publiceer notulen" onClick=(action 'terminatePublishFlow')}}
        {{b.button label="Annuleren" onClick=(action 'onClosePublishStatusModal') isLink=true icon="vi-cross"}}
      {{/m.buttons}}
    </div>
  {{/wu-modal}}
{{/if}}

{{#if publishFlow.isRunning}}
<div class="editor-container container-flex--scroll">
  <div class="editor">
    <div class="grid grid--align-center">
      <div class="col--7-12">
        <div class="editor__paper scanner">
          <div class="scanner__text">
            <div class="badge badge--accent badge--l badge--initials">
              <span class="loader"><span class="u-visually-hidden">Aan het verwerken</span></span>
            </div>
            <h3 class="h3">Bezig met verwerken</h3>
          </div>
          <span class="scanner__bar"></span>
          {{{editorDomNode.innerHTML}}}
        </div>
      </div>
    </div>
  </div>
</div>
{{else if save.isRunning}}
<div class="editor-container container-flex--scroll">
  <div class="editor">
    <div class="grid grid--align-center">
      <div class="col--7-12">
        <div class="editor__paper scanner">
          <div class="scanner__text">
            <div class="badge badge--l badge--initials">
              <span class="loader"><span class="u-visually-hidden">Aan het verwerken</span></span>
            </div>
            <h3 class="h3">Bezig met opslaan</h3>
          </div>
          <span class="scanner__bar"></span>
          {{{editorDomNode.innerHTML}}}
        </div>
      </div>
    </div>
  </div>
</div>
{{else}}
  {{rdfa-editor-container profile=profile editorDocument=editorDocument rdfaEditorContainerInit=(action "handleRdfaEditorInit") onUpdateTasklists=(action "updateTasklists")}}
{{/if}}

{{outlet}}
